<?php
use InterpretersOffice\Entity;

if ($this->results):
    if (!count($this->results)):?>
<p>We found no records matching the above criteria.</p>
    <?php return; endif;
endif; ?>
<p>
    <?php echo $this->paginationControl($this->results, null, 'partials/pagination_head');?>
</p>
<table class="table">
<thead></thead>
    <tbody>
        <?php foreach ($this->results as $e): ?>
            <tr>
                <td><?php echo $e->getDate()->format('d-M-Y')?></td>
                <td><?php echo $this->escapeHtml($e->getLanguage())?></td>
                <td><?php echo $this->escapeHtml($e->getEventType())?></td>
                <td><?php $judge = $e->getJudge() ?: $e->getAnonymousJudge();
                if ($judge instanceof Entity\Judge):
                    echo $this->escapeHtml($judge->getLastName());
                else:
                    echo $this->escapeHtml($judge->getName());
                endif;
                ?></td>
                <td><?php echo $this->escapeHtml($e->getDocket())?></td>
                <td><?php foreach ($e->getDefendants() as $d):
                    echo $this->escapeHtml($d->getFullName()),'<br>';
                endforeach;?></td>
                <td><?php
                    foreach ($e->getInterpreterEvents() as $i):
                         echo $this->escapeHtml($i->getInterpreter()->getFullName()),'<br>';
                    endforeach;
                    ?>
                </td>
            </tr>
        <?php endforeach ?>
    </tbody>
</table>
<?php
    echo $this->paginationControl($this->results,'sliding',
        'partials/pagination_control',['route' => 'search']);

/*
[0] => 0
    [1] => type
    [2] => judge
    [3] => judge_id
    [4] => location
    [5] => anon_judge
    [6] => language
    [7] => cancellation
 */
