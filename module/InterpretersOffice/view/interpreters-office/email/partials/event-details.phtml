<?php
/** partial for displaying event details in an email */
// this is event-details.phtml; escaped?
// var_dump($this->escaped)
// does this-&gt;entity have comments? <?php echo key_exists('comments',$this->entity) ? "YES": "NO"
?>
<br>
<table style="margin-bottom:1em">
    <tbody>
    <?php $entity = $this->entity; foreach (array_keys($entity) as $field):
        /** @todo  need to figure out what to do with this 'extraData'... */
        if ($field == 'extraData') : continue; endif;
        if ($field == 'comments' && !$this->with_comments) : continue; endif;
        if ($field == 'eventType' or $field == 'event_type') :
            $label = 'event type';
        else :
            $label = $field;
        endif;
    ?>
    <tr>
        <td style="border-bottom:1px dotted gray; vertical-align:top"><?php echo $label ?></td>
        <td style="border-bottom:1px dotted gray"><?php
           // the "escaped" flag means it is already string data/finished HTML
            echo $this->escaped ? $this->entity[$field] : $this->escapeHtml($this->entity[$field])
            ?></td>
    </tr>
<?php endforeach; ?>
    </tbody>
</table>
