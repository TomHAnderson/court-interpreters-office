CREATE TABLE languages (id SMALLINT UNSIGNED AUTO_INCREMENT NOT NULL, name VARCHAR(50) NOT NULL, comments VARCHAR(300) DEFAULT '' NOT NULL, UNIQUE INDEX unique_language (name), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE cancellation_reasons (id SMALLINT UNSIGNED AUTO_INCREMENT NOT NULL, reason VARCHAR(40) NOT NULL, UNIQUE INDEX unique_cancel_reason (reason), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE hats (id SMALLINT UNSIGNED AUTO_INCREMENT NOT NULL, role_id SMALLINT UNSIGNED DEFAULT NULL, name VARCHAR(50) NOT NULL, can_be_anonymous TINYINT(1) DEFAULT '0' NOT NULL, INDEX IDX_149C3D93D60322AC (role_id), UNIQUE INDEX hat_idx (name), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE judge_flavors (id INT AUTO_INCREMENT NOT NULL, flavor VARCHAR(60) NOT NULL, UNIQUE INDEX unique_judge_flavor (flavor), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE defendant_names (id INT AUTO_INCREMENT NOT NULL, given_names VARCHAR(60) NOT NULL, surnames VARCHAR(60) NOT NULL, UNIQUE INDEX unique_deftname (given_names, surnames), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE users (id SMALLINT UNSIGNED AUTO_INCREMENT NOT NULL, person_id SMALLINT UNSIGNED NOT NULL, role_id SMALLINT UNSIGNED NOT NULL, password VARCHAR(255) NOT NULL, username VARCHAR(50) DEFAULT NULL, active TINYINT(1) DEFAULT '0' NOT NULL, UNIQUE INDEX UNIQ_1483A5E9217BBB47 (person_id), INDEX IDX_1483A5E9D60322AC (role_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE clerks_judges (user_id SMALLINT UNSIGNED NOT NULL, judge_id SMALLINT UNSIGNED NOT NULL, INDEX IDX_DB59EF06A76ED395 (user_id), INDEX IDX_DB59EF06B7D66194 (judge_id), PRIMARY KEY(user_id, judge_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE locations (id SMALLINT UNSIGNED AUTO_INCREMENT NOT NULL, type_id SMALLINT UNSIGNED NOT NULL, parent_location_id SMALLINT UNSIGNED DEFAULT NULL, name VARCHAR(60) NOT NULL, comments VARCHAR(200) DEFAULT '' NOT NULL, active TINYINT(1) DEFAULT '1' NOT NULL, INDEX IDX_17E64ABAC54C8C93 (type_id), INDEX IDX_17E64ABA6D6133FE (parent_location_id), UNIQUE INDEX unique_name_and_parent (name, parent_location_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE roles (id SMALLINT UNSIGNED AUTO_INCREMENT NOT NULL, name VARCHAR(40) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE interpreters_languages (interpreter_id SMALLINT UNSIGNED NOT NULL, language_id SMALLINT UNSIGNED NOT NULL, federal_certification TINYINT(1) DEFAULT NULL, INDEX IDX_E0423968AD59FFB1 (interpreter_id), INDEX IDX_E042396882F1BAF4 (language_id), PRIMARY KEY(interpreter_id, language_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE people (id SMALLINT UNSIGNED AUTO_INCREMENT NOT NULL, hat_id SMALLINT UNSIGNED NOT NULL, email VARCHAR(50) DEFAULT NULL, lastname VARCHAR(50) NOT NULL, firstname VARCHAR(50) NOT NULL, middlename VARCHAR(50) DEFAULT '' NOT NULL, office_phone VARCHAR(20) DEFAULT '' NOT NULL, mobile_phone VARCHAR(20) DEFAULT '' NOT NULL, active TINYINT(1) NOT NULL, discr VARCHAR(255) NOT NULL, INDEX IDX_28166A268C6A5980 (hat_id), UNIQUE INDEX hat_email_idx (email, hat_id), UNIQUE INDEX active_email_idx (email, active), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE judges (id SMALLINT UNSIGNED NOT NULL, default_location_id SMALLINT UNSIGNED DEFAULT NULL, flavor_id INT NOT NULL, INDEX IDX_1C5E0B5D2BE3238 (default_location_id), INDEX IDX_1C5E0B5FDDA6450 (flavor_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE holidays (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE event_types (id SMALLINT UNSIGNED AUTO_INCREMENT NOT NULL, category_id SMALLINT UNSIGNED NOT NULL, name VARCHAR(60) NOT NULL, comments VARCHAR(150) DEFAULT '' NOT NULL, INDEX IDX_182B381C12469DE2 (category_id), UNIQUE INDEX unique_event_type (name), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE interpreters (id SMALLINT UNSIGNED NOT NULL, phone VARCHAR(16) DEFAULT NULL, dob DATE NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE anonymous_judges (id SMALLINT UNSIGNED AUTO_INCREMENT NOT NULL, name VARCHAR(50) NOT NULL, default_location_id VARCHAR(255) DEFAULT NULL, UNIQUE INDEX unique_anon_judge (name), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE court_closings (id INT AUTO_INCREMENT NOT NULL, holiday_id INT DEFAULT NULL, date DATE NOT NULL, description_other VARCHAR(75) DEFAULT NULL, INDEX IDX_F21F4FD1830A3EC0 (holiday_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE event_categories (id SMALLINT UNSIGNED AUTO_INCREMENT NOT NULL, category VARCHAR(20) NOT NULL, UNIQUE INDEX unique_event_category (category), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE events (id SMALLINT UNSIGNED AUTO_INCREMENT NOT NULL, language_id SMALLINT UNSIGNED NOT NULL, judge_id SMALLINT UNSIGNED DEFAULT NULL, submitter_id SMALLINT UNSIGNED DEFAULT NULL, location_id SMALLINT UNSIGNED DEFAULT NULL, date DATE NOT NULL, time TIME DEFAULT NULL, end_time TIME DEFAULT NULL, docket VARCHAR(15) DEFAULT '' NOT NULL, comments VARCHAR(600) DEFAULT '' NOT NULL, admin_comments VARCHAR(600) DEFAULT '' NOT NULL, created DATETIME NOT NULL, modified DATETIME NOT NULL, eventType_id SMALLINT UNSIGNED NOT NULL, anonymousJudge_id SMALLINT UNSIGNED DEFAULT NULL, anonymousSubmitter_id SMALLINT UNSIGNED DEFAULT NULL, cancellationReason_id SMALLINT UNSIGNED DEFAULT NULL, createdBy_id SMALLINT UNSIGNED NOT NULL, modifiedBy_id SMALLINT UNSIGNED NOT NULL, INDEX IDX_5387574A82F1BAF4 (language_id), INDEX IDX_5387574AC15B25DE (eventType_id), INDEX IDX_5387574AB7D66194 (judge_id), INDEX IDX_5387574ACFE35E18 (anonymousJudge_id), INDEX IDX_5387574A919E5513 (submitter_id), INDEX IDX_5387574AE5C9C585 (anonymousSubmitter_id), INDEX IDX_5387574A64D218E (location_id), INDEX IDX_5387574A102A8F3E (cancellationReason_id), INDEX IDX_5387574A3174800F (createdBy_id), INDEX IDX_5387574AD6A05076 (modifiedBy_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE defendants_events (event_id SMALLINT UNSIGNED NOT NULL, defendant_id INT NOT NULL, INDEX IDX_DBDD360771F7E88B (event_id), INDEX IDX_DBDD36079960FFFB (defendant_id), PRIMARY KEY(event_id, defendant_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE location_types (id SMALLINT UNSIGNED AUTO_INCREMENT NOT NULL, type VARCHAR(60) NOT NULL, comments VARCHAR(200) DEFAULT '' NOT NULL, UNIQUE INDEX unique_type (type), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE interpreters_events (interpreter_id SMALLINT UNSIGNED NOT NULL, event_id SMALLINT UNSIGNED NOT NULL, created DATETIME NOT NULL, createdBy_id SMALLINT UNSIGNED NOT NULL, INDEX IDX_590E5B07AD59FFB1 (interpreter_id), INDEX IDX_590E5B0771F7E88B (event_id), INDEX IDX_590E5B073174800F (createdBy_id), UNIQUE INDEX unique_interp_event (interpreter_id, event_id), PRIMARY KEY(interpreter_id, event_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE hats ADD CONSTRAINT FK_149C3D93D60322AC FOREIGN KEY (role_id) REFERENCES roles (id);
ALTER TABLE users ADD CONSTRAINT FK_1483A5E9217BBB47 FOREIGN KEY (person_id) REFERENCES people (id);
ALTER TABLE users ADD CONSTRAINT FK_1483A5E9D60322AC FOREIGN KEY (role_id) REFERENCES roles (id);
ALTER TABLE clerks_judges ADD CONSTRAINT FK_DB59EF06A76ED395 FOREIGN KEY (user_id) REFERENCES users (id);
ALTER TABLE clerks_judges ADD CONSTRAINT FK_DB59EF06B7D66194 FOREIGN KEY (judge_id) REFERENCES judges (id);
ALTER TABLE locations ADD CONSTRAINT FK_17E64ABAC54C8C93 FOREIGN KEY (type_id) REFERENCES location_types (id);
ALTER TABLE locations ADD CONSTRAINT FK_17E64ABA6D6133FE FOREIGN KEY (parent_location_id) REFERENCES locations (id);
ALTER TABLE interpreters_languages ADD CONSTRAINT FK_E0423968AD59FFB1 FOREIGN KEY (interpreter_id) REFERENCES interpreters (id);
ALTER TABLE interpreters_languages ADD CONSTRAINT FK_E042396882F1BAF4 FOREIGN KEY (language_id) REFERENCES languages (id);
ALTER TABLE people ADD CONSTRAINT FK_28166A268C6A5980 FOREIGN KEY (hat_id) REFERENCES hats (id);
ALTER TABLE judges ADD CONSTRAINT FK_1C5E0B5D2BE3238 FOREIGN KEY (default_location_id) REFERENCES locations (id);
ALTER TABLE judges ADD CONSTRAINT FK_1C5E0B5FDDA6450 FOREIGN KEY (flavor_id) REFERENCES judge_flavors (id);
ALTER TABLE judges ADD CONSTRAINT FK_1C5E0B5BF396750 FOREIGN KEY (id) REFERENCES people (id) ON DELETE CASCADE;
ALTER TABLE event_types ADD CONSTRAINT FK_182B381C12469DE2 FOREIGN KEY (category_id) REFERENCES event_categories (id);
ALTER TABLE interpreters ADD CONSTRAINT FK_4EBBDB02BF396750 FOREIGN KEY (id) REFERENCES people (id) ON DELETE CASCADE;
ALTER TABLE court_closings ADD CONSTRAINT FK_F21F4FD1830A3EC0 FOREIGN KEY (holiday_id) REFERENCES holidays (id);
ALTER TABLE events ADD CONSTRAINT FK_5387574A82F1BAF4 FOREIGN KEY (language_id) REFERENCES languages (id);
ALTER TABLE events ADD CONSTRAINT FK_5387574AC15B25DE FOREIGN KEY (eventType_id) REFERENCES event_types (id);
ALTER TABLE events ADD CONSTRAINT FK_5387574AB7D66194 FOREIGN KEY (judge_id) REFERENCES judges (id);
ALTER TABLE events ADD CONSTRAINT FK_5387574ACFE35E18 FOREIGN KEY (anonymousJudge_id) REFERENCES anonymous_judges (id);
ALTER TABLE events ADD CONSTRAINT FK_5387574A919E5513 FOREIGN KEY (submitter_id) REFERENCES people (id);
ALTER TABLE events ADD CONSTRAINT FK_5387574AE5C9C585 FOREIGN KEY (anonymousSubmitter_id) REFERENCES hats (id);
ALTER TABLE events ADD CONSTRAINT FK_5387574A64D218E FOREIGN KEY (location_id) REFERENCES locations (id);
ALTER TABLE events ADD CONSTRAINT FK_5387574A102A8F3E FOREIGN KEY (cancellationReason_id) REFERENCES cancellation_reasons (id);
ALTER TABLE events ADD CONSTRAINT FK_5387574A3174800F FOREIGN KEY (createdBy_id) REFERENCES users (id);
ALTER TABLE events ADD CONSTRAINT FK_5387574AD6A05076 FOREIGN KEY (modifiedBy_id) REFERENCES users (id);
ALTER TABLE defendants_events ADD CONSTRAINT FK_DBDD360771F7E88B FOREIGN KEY (event_id) REFERENCES events (id) ON DELETE CASCADE;
ALTER TABLE defendants_events ADD CONSTRAINT FK_DBDD36079960FFFB FOREIGN KEY (defendant_id) REFERENCES defendant_names (id);
ALTER TABLE interpreters_events ADD CONSTRAINT FK_590E5B07AD59FFB1 FOREIGN KEY (interpreter_id) REFERENCES interpreters (id);
ALTER TABLE interpreters_events ADD CONSTRAINT FK_590E5B0771F7E88B FOREIGN KEY (event_id) REFERENCES events (id);
ALTER TABLE interpreters_events ADD CONSTRAINT FK_590E5B073174800F FOREIGN KEY (createdBy_id) REFERENCES users (id);
